import{Q as e,R as t,W as r,X as c,d as n,u as a,Y as s,c as u,Z as p,i as o,h as l,q as i,b as m,A as h,t as d,$ as _,a0 as v,a as f,z as w,f as g,F as b,H as S,e as k,M as q,a1 as x,y as I,a2 as $,r as y,O as C}from"./index.5e69bc60.js";const R=(e,t="")=>t.toLowerCase().includes(e),T=(e,t)=>R(e,t.name),j=[{...e,filter:(e,t)=>{const r=R(e,t.name),c=R(e,t.artists.join(" ")),n=R(e,t.album);return r||c||n}},{...t,filter:T},{...r,filter:T},{...c,filter:T}],z=d('<div><input aria-label="Search box" placeholder="Search..." autocapitalize="none"></div>',3),O=d("<div></div>",2),U=e=>{const t=a();let r;const c=e=>{t(`/search/${encodeURIComponent(e)}`,{replace:!0})},n=v((()=>{const e=r.value.trim();c(e)}),200),d=()=>{c("")};return s((()=>{if(!r)return;const t=e.searchTerm;_(r)&&""!==t||(r.value=t)})),u(h,{hideSpacer:!0,get children(){return[(()=>{const t=z.cloneNode(!0),c=t.firstChild;return"function"==typeof r?r(c):r=c,p(c,"input",n,!0),o(t,(()=>{const t=l((()=>!!e.searchTerm),!0);return()=>t()&&u(i,{icon:"close",onClick:d})})(),null),m((e=>{const r="i ad",n="wa F Q -a bd";return r!==e.t&&(t.className=e.t=r),n!==e.u&&(c.className=e.u=n),e}),{t:void 0,u:void 0}),t})(),(()=>{const e=O.cloneNode(!0);return m((()=>e.className="cd")),e})()]}})};n(["input"]);const W=d("<div></div>",2),A=d("<button></button>",2),B=d("<h1></h1>",2),E="/search/:searchTerm",F=()=>{const[e]=f(),t=w((()=>"/search/:searchTerm/*")),r=l((()=>{var e;return decodeURIComponent((null==(e=t())?void 0:e.params.searchTerm)||"")})),c=j.map((t=>{const[c,n]=g(!0),a=l(((n=[])=>{const a=Object.values((t=>{switch(t){case C.TRACK:return e.tracks;case C.ARTIST:return e.artists;case C.ALBUM:return e.albums;case C.PLAYLIST:return e.playlists;default:throw new Error("Wrong type")}})(t.type)),s=c(),u=r().trim().toLowerCase();return $((()=>""===u?a.map((e=>e.id)):s?(e=>e.sort(((e,t)=>{const r=e.name.toLowerCase().trim(),c=t.name.toLowerCase().trim();return r<c?-1:r>c?1:0})))(a.filter((e=>t.filter(u,e)))).map((e=>e.id)):n))}));return{...t,itemIds:a,isSelected:c,setIsSelected:n}})),n=l((()=>c.some((e=>0!==e.itemIds().length))));return u(I,{get topBar(){return u(U,{get searchTerm(){return r()}})},title:"Search",scrollable:!0,get children(){return[(()=>{const e=W.cloneNode(!0);return o(e,u(b,{each:c,children:e=>(()=>{const t=A.cloneNode(!0);return t.$$click=()=>e.setIsSelected((e=>!e)),o(t,u(S,{icon:"checkmark",get class(){return"hd"}}),null),o(t,(()=>e.title),null),m((()=>t.className=y("na -B -J -F F Q -a -u -p -S da y fd",e.isSelected()&&"gd"))),t})()})),m((()=>e.className="ka -q -u ed")),e})(),u(k,{get when(){return n()},get fallback(){return u(q,{message:"Nothing found"})},get children(){return u(b,{each:c,children:e=>u(k,{get when(){return l((()=>!!e.itemIds().length),!0)()&&e.isSelected()},get children(){return[(()=>{const t=B.cloneNode(!0);return o(t,(()=>e.title)),m((()=>t.className="D O Z -j -q id")),t})(),u(x,{get component(){return e.component},get items(){return e.itemIds()}})]}})})}})]}})};n(["click"]);export{E as SEARCH_MAIN_PATH,F as default};
